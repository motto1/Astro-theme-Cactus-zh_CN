---
import BaseHead from "@/components/BaseHead.astro";
import SkipLink from "@/components/SkipLink.astro";
import ThemeProvider from "@/components/ThemeProvider.astro";
import Footer from "@/components/layout/Footer.astro";
import Header from "@/components/layout/Header.astro";
import { siteConfig } from "@/site.config";
import type { SiteMeta } from "@/types";

interface Props {
	meta: SiteMeta;
}

const {
	meta: { articleDate, description = siteConfig.description, ogImage, title },
} = Astro.props;
---

<html class="scroll-smooth" lang={siteConfig.lang}>
	<head>
		<BaseHead articleDate={articleDate} description={description} ogImage={ogImage} title={title} />
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css"
		/>
		<style>
			/* Apple-style modern design enhancements */
			:root {
				--glass-bg: rgba(255, 255, 255, 0.1);
				--glass-border: rgba(255, 255, 255, 0.2);
				--shadow-soft: 0 8px 32px rgba(0, 0, 0, 0.1);
				--shadow-medium: 0 12px 48px rgba(0, 0, 0, 0.15);
				--shadow-strong: 0 20px 64px rgba(0, 0, 0, 0.2);
				--gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				--gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
				--blur-amount: 20px;
			}
			
			[data-theme="dark"] {
				--glass-bg: rgba(0, 0, 0, 0.3);
				--glass-border: rgba(255, 255, 255, 0.1);
				--shadow-soft: 0 8px 32px rgba(0, 0, 0, 0.3);
				--shadow-medium: 0 12px 48px rgba(0, 0, 0, 0.4);
				--shadow-strong: 0 20px 64px rgba(0, 0, 0, 0.5);
			}
			
			.glass-card {
				background: var(--glass-bg);
				border: 1px solid var(--glass-border);
				backdrop-filter: blur(var(--blur-amount));
				-webkit-backdrop-filter: blur(var(--blur-amount));
				border-radius: 16px;
				transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			}
			
			.glass-card:hover {
				transform: translateY(-2px);
				box-shadow: var(--shadow-medium);
				border-color: rgba(255, 255, 255, 0.3);
			}
			
			.modern-section {
				padding: 2rem;
				border-radius: 20px;
				background: var(--glass-bg);
				backdrop-filter: blur(var(--blur-amount));
				-webkit-backdrop-filter: blur(var(--blur-amount));
				border: 1px solid var(--glass-border);
				box-shadow: var(--shadow-soft);
				transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
			}
			
			.modern-section:hover {
				box-shadow: var(--shadow-medium);
				transform: translateY(-1px);
			}
			
			.modern-title {
				font-weight: 700;
				font-size: 1.5rem;
				background: linear-gradient(135deg, #60a5fa, #3b82f6);
				-webkit-background-clip: text;
				background-clip: text;
				color: transparent;
				margin-bottom: 1.5rem;
				letter-spacing: -0.025em;
			}
			
			.smooth-transition {
				transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			}
			
			/* 响应式背景渐变 */
			body {
				background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
				transition: background 0.3s ease;
			}
			
			[data-theme="dark"] body {
				background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%) !important;
			}
			
			/* 动画增强 */
			@keyframes fadeInUp {
				from {
					opacity: 0;
					transform: translateY(30px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}
			
			.fade-in-up {
				animation: fadeInUp 0.6s ease-out;
			}
		</style>
	</head>
	>
	<!-- 修改：现代化背景和布局 -->
	<body
		class="mx-auto flex min-h-screen max-w-5xl flex-col px-6 pt-20 font-mono text-sm font-normal text-textColor antialiased sm:px-10 transition-colors duration-300"
	>
		<ThemeProvider />
		<SkipLink />
		<Header />
		<main id="main">
			<slot />
		</main>
		<Footer />
	</body>
</html>
